<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Installing CrashFix in Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="style.css" rel="stylesheet" type="text/css">
<link rel="icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<link href="$relpath/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="$relpath/search.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div style="padding:10px">
<table border="0" bgcolor="#FFFFFF" cellspacing="5" width="100%">
 <tr>
  <td width="24px" rowspan="2"><img src="../logo.png" alt="Logo" /></td>
  <td></td>
  <td rowspan="2" align="right"></td>
 </tr>
 <tr>
  <td colspan="2"></td>
 </tr>
</table>
</div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">CrashFix Documentation</a></li><li class="navelem"><a class="el" href="installation.html">Installation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installing CrashFix in Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>CrashFix software contains the following components: CrashFix service (daemon), CrashFix web application and CrashFix debug info uploader application. The first two components (daemon and web application) work in Linux, and the third component (uploader) works in Windows.</p>
<p>This page covers the following topics:</p>
<ul>
<li><a class="el" href="install_linux.html#sysreq_linux">System Requirements</a></li>
<li><a class="el" href="install_linux.html#linux_install_apache_php_db">Installing Apache + PHP + Database</a></li>
<li><a class="el" href="install_linux.html#linux_install_webapp">Installing CrashFix Web Application</a></li>
<li><a class="el" href="install_linux.html#linux_install_service">Installing CrashFix Service</a></li>
<li><a class="el" href="install_linux.html#linux_install_uploader">Installing CrashFix Debug Info Uploader Tool</a></li>
</ul>
<h1><a class="anchor" id="sysreq_linux"></a>
System Requirements</h1>
<p>In order to install and use CrashFix service and web application, you need the following system requirements to be satisfied:</p>
<ul>
<li>Linux operating system.</li>
<li>Apache HTTP Server 2.2.</li>
<li>PHP 5.3 or later (plus extensions PDO, GD).</li>
<li>Database (MySQL).</li>
<li>2 GB of free disk space (to store crash reports and symbols).</li>
<li>Network connection (either LAN or Internet).</li>
</ul>
<p>In general, it is recommended that you use a popular and well supported Linux distribution like Ubuntu Linux or Red Hat Linux (either x86 or amd64). <br  />
 If you plan to install CrashFix on Ubuntu, it is recommended to use an LTS (long term support) release of Ubuntu Server, for example Ubuntu Server 12.04 LTS or Ubuntu Server 14.04 LTS. Non-LTS releases are not recommended to use, because of their short support period.</p>
<p>In order to install and use CrashFix debug info uploader tool, you need the following system requirements to be satisfied:</p>
<ul>
<li>Windows operating system (Windows Vista or later).</li>
<li>5 MB of free disk space.</li>
<li>Network connection (either LAN or Internet to upload files via network).</li>
</ul>
<h1><a class="anchor" id="linux_install_apache_php_db"></a>
Installing Apache + PHP + Database</h1>
<p>You may read this section if you do not have Apache HTTP server, PHP engine and a database installed. This section provides instructions on how to install Apache, PHP and an appropriate database (MySQL). If you already have these installed, you may skip this section and refer directly to the <a href="#webapp">Installing CrashFix Web Application</a> section.</p>
<h2><a class="anchor" id="linux_install_apache_php"></a>
Installing Apache and PHP</h2>
<p><b>Debian or Linux Ubuntu</b></p>
<p>From a command shell, run the following commands:</p>
<pre>
sudo apt-get install apache2</pre><pre>sudo apt-get install php5</pre><pre>sudo apt-get install libapache2-mod-php5 php5-gd
</pre><p>The commands above download from repository and install the latest available versions of Apache HTTP Server, PHP engine and PHP extension modules for Apache.</p>
<p>Your web files will now be located in <em>/var/www</em> directory.</p>
<p><b>CentOS or Red Hat Linux</b></p>
<p>From a command shell, run the following commands:</p>
<pre>
sudo yum install httpd</pre><pre>sudo yum install php php-gd php-dom
</pre><p>The commands above download from repository and install the latest available versions of Apache HTTP Server, PHP engine and PHP extension module for Apache.</p>
<p>Next, run the following commands to add Apache HTTP Server to autorun and start it:</p>
<pre>
sudo chkconfig --level 235 httpd on</pre><pre>sudo service httpd start
</pre><p>Your web files will now be located in <em>/var/www/html</em> directory.</p>
<h2><a class="anchor" id="linux_install_db"></a>
Installing a Database</h2>
<p><b>Debian or Linux Ubuntu</b></p>
<p>In order to install MySQL database, type the following:</p>
<pre>
sudo apt-get install mysql-server</pre><pre>sudo apt-get install mysql-client</pre><pre>sudo apt-get install php5-mysql
</pre><p>The commands above install MySQL server component, MySQL client component and MySQL extension module for PHP, respectively.</p>
<p><b>CentOS or Red Hat Linux</b></p>
<p>In order to install MySQL database, type the following:</p>
<pre>
sudo yum install mysql-server</pre><pre>sudo yum install mysql</pre><pre>sudo yum install php-mysql
</pre><p>The commands above install MySQL server component, MySQL client component and MySQL extension module for PHP, respectively.</p>
<p>Run the following commands to add MySQL server to autostart and start the server:</p>
<pre>
sudo chkconfig --level 235 mysqld on</pre><pre>sudo service mysqld start
</pre><h2><a class="anchor" id="linux_configure_mysql"></a>
Configuring the MySQL Database Server</h2>
<p><em>Note:</em> You may skip this section if you use SQLite database.</p>
<p>During the installation of the MySQL database server, a root user is created. You need to create a MySQL root user password. You will need the password for creating other MySQL server users.</p>
<p>To connect to the MySQL server enter the following command:</p>
<pre>
mysql -u root -p
</pre><p>The MySQL command prompt appears. At the command prompt enter the following command and press Enter (in the command below, replace the &lt;your_password&gt; placeholder with some password):</p>
<pre>
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('&lt;your_password&gt;');
</pre><p>If the command is executed successfully, the following message is displayed:</p>
<pre>
Query OK, 0 rows affected (0.00 sec)
</pre><p>Now we need to create a new database schema that will store CrashFix tables. To do this, type the following:</p>
<pre>
CREATE SCHEMA crashfix;
</pre><p>The command above creates empty schema that we will populate later.</p>
<p>Next, we want to create another database user named <em>crashfix</em> that will be used by CrashFix web application for connecting to database. To create the user, type the following (in the command below, replace the &lt;your_password&gt; placeholder with some password):</p>
<pre>
GRANT ALL PRIVILEGES ON crashfix.* TO 'crashfix'@'localhost' IDENTIFIED BY '&lt;your_password&gt;';
</pre><p>The command above creates the user named 'crashfix' and grants the user all privileges on 'crashfix' database schema.</p>
<p>Finally, type 'quit' to exit the MySQL prompt.</p>
<h2><a class="anchor" id="linux_check_webserver_install"></a>
Checking Web Server Installation</h2>
<p>After you set up your web server, check that it is installed correctly and that your Apache server recognizes your PHP engine.</p>
<p>To check that Apache and PHP are installed and running, create <em>phpinfo.php</em> file in Apache document root directory.</p>
<p><em>Note:</em> Typically, the Apache document root directory is <em>/var/www</em> (in Debian or Linux Ubuntu) or <em>/var/www/html</em> (in CentOS or Red Hat Linux).</p>
<p>In the <em>phpinfo.php</em> file, enter the PHP method <em>phpinfo()</em> as follows:</p>
<pre>
&lt;?php 
    phpinfo(); 
?&gt;
</pre> <pre class="fragment">Open the file in your browser. 
The standard PHP information page should display. 
</pre><div class="image">
<img src="phpinfo.png" alt=""/>
<div class="caption">
PHP information page</div></div>
<h1><a class="anchor" id="linux_install_webapp"></a>
Installing CrashFix Web Application</h1>
<p>CrashFix web application is a web site written in PHP. Using the web application, CrashFix users may access CrashFix and perform administrative and daily usage tasks.</p>
<p>At this point, you should have Apache HTTP server + PHP + database (MySQL or SQLite) installed.</p>
<p>Download CrashFix web application archive from our <a href="https://sourceforge.net/projects/crashfix/files/">Download</a> page.</p>
<p>Unpack the archive:</p>
<pre>
tar xzvf crashfix-webapp-1.0.x.tar.gz
</pre><p>Next, move the files to web server's document root directory:</p>
<p><em>Note:</em> Typically, the document root is <em>/var/www</em> directory (in Debian or Linux Ubuntu) or <em>/var/www/html</em> directory (in CentOS or Red Hat). Below, we denote the document root directory as <em>DOCUMENT_ROOT%</em>, and you should replace this placeholder with the actual directory path.</p>
<pre>
sudo mv crashfix DOCUMENT_ROOT
</pre><p>If everything is OK, you should have CrashFix files in <em>DOCUMENT_ROOT%/crashfix</em> directory:</p>
<pre>
DOCUMENT_ROOT%/crashfix
    index.php       | CrashFix web application entry script
    assets/         | The directory where temporary resources (like images and CSS files) will be published
    protected/      | This directory content is protected from direct access by .htaccess file
        ...
        config/     | This directory contains configuration files
        data/       | This directory will contain crash reports and debug info files
        ...
        runtime/    | This directory will contain logs and temporary files
</pre><p>Edit the <em>DOCUMENT_ROOT%/crashfix/protected/config/user_params.ini</em> config file and specify the correct database connection string, login and password. For additional information on config file fields and their meaning, please refer to comment lines that can be found in the config file.</p>
<p><em>Note:</em> To edit the config file, you can use Midnight Commander editor or another editor. For example, the commands below install Midnight Commander (in Linux Ubuntu) and open the config file in it. When ready, press F10 to quit the editor.</p>
<pre>
sudo apt-get install mc</pre><pre>sudo mcedit DOCUMENT_ROOT%/crashfix/protected/config/user_params.ini
</pre><h2><a class="anchor" id="linux_file_perms"></a>
Setting File and Directory Permissions</h2>
<p>You should configure file and directory permissions in order to make CrashFix web application work properly.</p>
<p>From a command shell, run the following command:</p>
<pre>
sudo chmod -R 0755 DOCUMENT_ROOT%/crashfix
</pre><p>The command above makes <em>DOCUMENT_ROOT%/crashfix</em> directory, its subdirectories and files readable and writable for Apache webserver.</p>
<p>The following command sets Apache webserver user to be the owner of <em>DOCUMENT_ROOT%/crashfix</em> directory and its subdirectories (typically, Apache webserver runs as 'www-data' user of 'www-data' group in Debian or Linux Ubuntu or as 'apache' user of 'apache' group in CentOS or Red Hat Linux). If your system is Debian or Linux Ubuntu, type the following command:</p>
<pre>
sudo chown -R www-data:www-data DOCUMENT_ROOT%/crashfix
</pre><p>If your system is CentOS or Red Hat Linux, type the following:</p>
<pre>
sudo chown -R apache:apache DOCUMENT_ROOT%/crashfix
</pre><p>Now, you can try to open the CrashFix web application in your web browser. To do this, type '<a href="http://localhost/crashfix/index.php'">http://localhost/crashfix/index.php'</a> in your browser's navigation bar and press Enter. Typically, you should see the following in your browser (see the image below):</p>
<div class="image">
<img src="webapp_login_page.png" alt=""/>
<div class="caption">
Webapp login page</div></div>
<h2><a class="anchor" id="linux_install_crashfix_db"></a>
Initializing CrashFix Database</h2>
<p>And at last, CrashFix database tables must be created and initialized before using the web application. This is performed by the database migration mechanism. To initialize the database tables, run the following command:</p>
<pre>
sudo php DOCUMENT_ROOT%/crashfix/protected/yiic.php migrate
</pre><p>When prompted, press 'y' and then press 'Enter'. If everything is OK, the following message appears:</p>
<pre>
Migrated up successfully.
</pre><p>Congratulations! Your CrashFix web application is now installed!</p>
<h1><a class="anchor" id="linux_install_service"></a>
Installing CrashFix Service</h1>
<p>CrashFix service is a daemon that persists in background and processes incoming crash report files.</p>
<p>First of all, download an appropriate CrashFix package (RPM or DEB) from our Download page. If your server is running Debian or Linux Ubuntu, you should download DEB package. If your server is running CentOS or Red Hat, you should download RPM package.</p>
<p>When the package has been downloaded, install it by typing the following (for DEB package):</p>
<pre>
sudo dpkg -i &lt;package_name&gt;
</pre><p>or (for RPM package):</p>
<pre>
sudo yum install &lt;package_name&gt;
</pre><p>In both the cases above, you should replace the <em>&lt;package_name&gt;</em> placeholder with the file name you have downloaded.</p>
<p>If everything is OK, you should have the following directories and files:</p>
<pre>
/usr/sbin/crashfixd           | The CrashFix daemon executable file
/etc/crashfix/crashfixd.conf  | The CrashFix daemon configuration file
/etc/init.d/crashfixd.sh      | The CrashFix shell script
/var/log/crashfix/            | The directory where CrashFix daemon places its log files
/var/run/crashfix/            | The directory where CrashFix daemon places its PID-file
</pre><p>Edit the config file <em>/etc/crashfix/crashfixd.conf</em>. For additional information on config file fields and their meaning, please refer to comment lines in the config file.</p>
<p>Now we want to add CrashFix service to autostart (this will automatically start CrashFix service on system boot).</p>
<p>If your system is Debian or Linux Ubuntu, type:</p>
<pre>
sudo update-rc.d -f crashfixd defaults
</pre><p>If your system is CentOS or Red Hat Linux, type:</p>
<pre>
sudo chkconfig --level 235 crashfixd on
</pre><p>Next, start the CrashFix service by typing the following command:</p>
<pre>
sudo service crashfixd start
</pre><p>The expected output of the last command is the following:</p>
<pre>
Checking if crashfixd process exists...
Could not read PID file /var/run/crashfixd.pid: No such file or directory
Forked the CrashFix daemon process: pid = &lt;pid&amp;gt.
</pre><p>To ensure CrashFix service is running, type the following command:</p>
<pre>
ps aux | grep crashfixd
</pre><p>The command above prints the list of processes having 'crashfix' in process name. The expected output is the following (in the output below, some unimportant characters were omitted and replaced by the ... placeholder):</p>
<pre>
root     &lt;pid&gt;  ... /usr/sbin/crashfixd --start -c /etc/crashfix/crashfixd.conf
root     &lt;pid&gt;  ... /usr/sbin/crashfixd --start -c /etc/crashfix/crashfixd.conf
</pre><p>There should be two processes launched under the root user: the daemon process and the monitoring process. The monitoring process is a process whose purpose is to check daemon's status periodically and restart the daemon on critical errors.</p>
<h1><a class="anchor" id="linux_install_uploader"></a>
Installing CrashFix Debug Info Uploader Tool</h1>
<p>CrashFix debug info uploader tool is a Windows application allowing users to upload their debug info (symbol) files to CrashFix server.</p>
<p>Download the CrashFix uploader tool ZIP archive from our Download page. Then unpack the archive to a directory of your choice.</p>
<p>You should have the following executable files in the directory:</p>
<ul>
<li><em>uploader_gui.exe</em> - GUI version of the tool</li>
<li><p class="startli"><em>uploader.exe</em> - console version of the tool</p>
<p class="startli">To get help on available uploader commands, type the following:</p>
</li>
</ul>
<pre>
uploader.exe --help
</pre><p><em>Note:</em> By default, PHP doesn't allow to upload large files (larger than 2MB). In order to upload large symbol files, you may need to edit your <em>php.ini</em> configuration file and modify the <em>post_max_size</em> and <em>upload_max_filesize</em> parameters. Setting these with 100MB would typically be sufficient (if you plan to upload very large PDB files up to 1 GB in size, than better set these with 1024MB). Do not forget to restart your Apache webserver after editing the config file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr size="1"><address style="text-align: right;"><small>
Generated on Sat Aug 6 2022 14:08:10 for CrashFix by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.17</small></address>
</body>
</html>
