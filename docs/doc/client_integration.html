<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Client-Side Integration</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="style.css" rel="stylesheet" type="text/css">
<link rel="icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<link href="$relpath/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="$relpath/search.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<div style="padding:10px">
<table border="0" bgcolor="#FFFFFF" cellspacing="5" width="100%">
 <tr>
  <td width="24px" rowspan="2"><img src="../logo.png" alt="Logo" /></td>
  <td></td>
  <td rowspan="2" align="right"></td>
 </tr>
 <tr>
  <td colspan="2"></td>
 </tr>
</table>
</div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Client-Side Integration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>As described on architecture page, your client application should be shipped with a crash reporting library. The crash reporting library's purpose is to catch exceptions in the client application, generate crash reports and send them over the Internet to CrashFix server.</p>
<p>Currently, CrashFix server supports receiving crash reports from the <a href="http://crashrpt.sourceforge.net">CrashRpt library</a>. CrashRpt is a light-weight, free and open-source library distributed under the New BSD License. It can be used in both commercial and open-source applications, with or without modifications.</p>
<p>First of all, download the latest version of the CrashRpt library from its <a href="http://crashrpt.sourceforge.net">official project page</a>.</p>
<p>Exhaustive instructions on how to install CrashRpt can be found on CrashRpt project's <a href="http://crashrpt.sourceforge.net/docs/html/index.html">Online Documentation</a> page.</p>
<p>Below, we provide specific instructions on how to configure CrashRpt to send crash reports to CrashFix server.</p>
<h1><a class="anchor" id="configure_crashrpt"></a>
Configuring CrashRpt to Send Crash Reports to CrashFix Server</h1>
<p>The CrashRpt configuration is typically stored in <em>CR_INSTALL_INFO</em> structure. In order to send crash reports to CrashFix server, you must set the following structure fields:</p>
<ul>
<li>
<p class="startli">Set <em>pszAppName</em> field with the name of the project you want to store crash reports in. For example, if you have created Editor project, set the <em>pszAppName</em> field with the value "Editor".  <br  />
</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Set <em>pszAppVersion</em> field with the version of your application. For example, if the current version of Editor project is v.1.0.0, set the <em>pszAppVersion</em> field with the value "1.0.0".  <br  />
</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Set <em>pszUrl</em> field with the the following URL: <em><a href="http://example.com/crashfix/index.php/crashReport/uploadExternal">http://example.com/crashfix/index.php/crashReport/uploadExternal</a></em>. In the example above, replace the <em>example.com</em> server name with your own CrashFix server name.  <br  />
</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Set <em>uPriorities</em> field as shown below: </p><pre>
info.uPriorities[CR_HTTP] = 1;                      // Use HTTP.
info.uPriorities[CR_SMTP] = CR_NEGATIVE_PRIORITY;   // Not user SMTP.
info.uPriorities[CR_SMAPI] = CR_NEGATIVE_PRIORITY;  // Not use Simple MAPI.  
</pre> <p class="endli"></p>
</li>
<li>
For <em>dwFlags</em> field, append the flag <em>CR_INST_HTTP_BINARY_ENCODING</em>. <br  />
  <br  />
 </li>
<li>
Other fields of the structure may be configured as recommended in CrashRpt documentation.  <br  />
 </li>
</ul>
<p>Below is an example of the code you may finally have:</p>
<pre>
    CR_INSTALL_INFO info;</pre><pre>    memset(&amp;info, 0, sizeof(CR_INSTALL_INFO));
    info.cb = sizeof(CR_INSTALL_INFO);  
    info.pszAppName = _T("Editor");    // Define application name.
    info.pszAppVersion = _T("1.0.0");  // Define application version.
    // URL for sending reports over HTTP.                       
    info.pszUrl = _T("http://example.com/crashfix/index.php/crashReport/uploadExternal");         
    // Define delivery transport priorities. 
    info.uPriorities[CR_HTTP] = 1;                     // Use HTTP.
    info.uPriorities[CR_SMTP] = CR_NEGATIVE_PRIORITY;  // Not use SMTP.
    info.uPriorities[CR_SMAPI] = CR_NEGATIVE_PRIORITY; // Not use Simple MAPI.  
    // Define flags.
    info.dwFlags = 0;                    
    info.dwFlags |= CR_INST_ALL_POSSIBLE_HANDLERS; // Install all available exception handlers.
    info.dwFlags |= CR_INST_HTTP_BINARY_ENCODING;  // Use binary encoding for HTTP uploads (recommended).      
</pre><h1><a class="anchor" id="custom_collection_name"></a>
Defining Custom Collection Name for Crash Report</h1>
<p>CrashFix server groups incoming crash reports into collections (see <a class="el" href="collections.html">Collections</a> page). Although collection names are generated automatically by CrashFix server based on stack trace information, sometimes it may be required to define custom collection names. Since v.1.0.4, a client application is able to define custom collection name by adding custom property named 'CollectionId' to crash report. An example code is presented below:</p>
<pre>
    crAddProperty(_T("CollectionId"), _T("My Custom Collection Name"));
</pre><p>Please note that to define custom collection name, the client application need to implement some kind of logics that would determine the collection name based on information about a crash.</p>
<p>Further reading: <a class="el" href="digest.html">Digest</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<hr size="1"><address style="text-align: right;"><small>
Generated on Sat Aug 6 2022 13:11:27 for CrashFix by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.17</small></address>
</body>
</html>
